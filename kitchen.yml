---
driver:
  name: vagrant
  synced_folders:
      - ['test/tmp', '/tmp/test', 'create: true', owner: "root", group: "root"]

provisioner:
  name: chef_zero
  always_update_cookbooks: true
  chef_license: accept
  product_name: chef
  product_version: 15

verifier:
  name: inspec

platforms:
  - name: centos-7

suites:
  - name: 15versioned
    run_list:
      - recipe[audit_artifactory::default]
    attributes:
      audit:
        reporter: json-file
        json_file:
          location: /tmp/test/15versioned-centos-report.json
      audit-artifactory:
        cache_dir: /tmp/test
        profiles:
          uptime-profile:
            base_url: http://10.0.0.46:8081/artifactory
            repo: test-repo
            group: testgroup
            version: 0.1.0
    verifier:
      inspec_tests:
        - test/integration/default
      attributes:
        json_file: /tmp/test/15versioned-centos-report.json
        profile: /tmp/test/uptime-profile-0.1.0.tgz
  - name: 15latest
    run_list:
      - recipe[audit_artifactory::default]
    attributes:
      audit:
        reporter: json-file
        json_file:
          location: /tmp/test/15latest-centos-report.json
      audit-artifactory:
        cache_dir: /tmp/test
        profiles:
          uptime-profile:
            base_url: http://10.0.0.46:8081/artifactory
            repo: test-repo
            group: testgroup
    verifier:
      inspec_tests:
        - test/integration/default
      attributes:
        json_file: /tmp/test/15latest-centos-report.json
        profile: /tmp/test/uptime-profile-0.2.0.tgz
  - name: 14versioned
    provisioner:
      product_version: 14
    run_list:
      - recipe[audit_artifactory::default]
    attributes:
      audit:
        reporter: json-file
        json_file:
          location: /tmp/test/14versioned-centos-report.json
      audit-artifactory:
        cache_dir: /tmp/test
        profiles:
          uptime-profile:
            base_url: http://10.0.0.46:8081/artifactory
            repo: test-repo
            group: testgroup
            version: 0.1.0
    verifier:
      inspec_tests:
        - test/integration/default
      attributes:
        json_file: /tmp/test/14versioned-centos-report.json
        profile: /tmp/test/uptime-profile-0.1.0.tgz
  - name: 14latest
    provisioner:
      product_version: 14
    run_list:
      - recipe[audit_artifactory::default]
    attributes:
      audit:
        reporter: json-file
        json_file:
          location: /tmp/test/14latest-centos-report.json
      audit-artifactory:
        cache_dir: /tmp/test
        profiles:
          uptime-profile:
            base_url: http://10.0.0.46:8081/artifactory
            repo: test-repo
            group: testgroup
    verifier:
      inspec_tests:
        - test/integration/default
      attributes:
        json_file: /tmp/test/14latest-centos-report.json
        profile: /tmp/test/uptime-profile-0.2.0.tgz
